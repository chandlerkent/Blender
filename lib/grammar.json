{   
    "lex": {
        "macros": {
            "Word":         "\\w+",
            "Ident":        "(({Word}?)-{Word}|{Word})",
            "HexNumber":    "([0-9a-fA-F]{6}|[0-9a-fA-F]{3})",
            "Number":       "([0-9]+|[0-9]*\\.[0-9]+)",
            "RGB":          "(RGB|rgb)",
        },
        
        "rules": [
            ["/\\*(.|\\n|\\r|\\r\\n)*?\\*/",                    "/* skip */"],
            ["//.*",                                            "/* skip */"],
            ["\\s+",                                            "/* skip */"],
            ["\\#{HexNumber}",                                  "return 'HEXCOLOR';"],
            ["{Ident}",                                         "return 'IDENT';"],
            ["(\\{|\\}|\\:|\\;|\\.|\\#)",                       "return yytext;"],
        ]
    },

    "bnf": { 
        "Stylesheet":       [
                                ["StmtList", "$$ = new yy.Stylesheet($1); return $$;"],
                            ],
        "StmtList":         [
                                ["", "$$ = [];"],
                                ["Stmt StmtList", "$2.unshift($1); $$ = $2;"],
                            ],
        "Stmt":             [
                                ["Class { AttributeList }", "$$ = new yy.ClassNode($1, $3);"],
                                ["Class : IDENT { AttributeList }", "$$ = new yy.ClassNode($1, $5, $3);"],
                            ],
        "Class":            [
                                [". IDENT", "$$ = $2;"],
                            ],
        "AttributeList":    [
                                ["", "$$ = [];"],
                                ["Attribute AttributeList", "$2.unshift($1); $$ = $2;"],
                            ],
        "Attribute":        [
                                ["Key : Value ;", "$$ = new yy.AttributeNode($1, $3);"]
                            ],
        "Key":              [
                                ["IDENT", "$$ = $1;"]
                            ],
        "Value":            [
                                ["Color", "$$ = $1;"],
                                ["IDENT", "if (yy.NamedColorNode.isNamedColor($1)) { $$ = new yy.NamedColorNode($1); } else if (yy.HexColorNode.namedColorToHexValue($1)) { $$ = new yy.HexColorNode(yy.HexColorNode.namedColorToHexValue($1)); } else { $$ = $1; }"],
                            ],
        "Color":            [
                                ["HEXCOLOR", "$$ = new yy.HexColorNode($1);"],
                                ["RGBCOLOR", "$$ = new yy.RGBColorNode($1);"],
                            ],
    }
}